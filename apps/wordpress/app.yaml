services:
  main:
    image: soulteary/sqlite-wordpress:6.5.3
    bind_ports: [80]
    storage:
      persistent:
        wp-content:
          container: /var/www/html
          size_limit: 5GB

listeners:
  - name: __primary
    guest_port: 80
    flow: tcp
    protocol: http
    auth:
      rules:
        - path: "/wp-admin/"
          type: prefix
          strategy: protected
        - path: "/wp-login.php"
          type: exact
          strategy: protected
        - path: "/"
          type: prefix
          strategy: public

x-piccolo:
  mode: service
